////
This file is only meant to be included as a snippet in other documents.
There is a version of this file for the general 'Installing Jenkins' page
(index.adoc) and another for tutorials (_run-jenkins-in-docker.adoc).
This file is for the index.adoc page used in the general 'Installing Jenkins'
page.
If you update content on this page, please ensure the changes are reflected in
the sibling file _docker-for-tutorials.adoc (used in
_run-jenkins-in-docker.adoc).
////

[[quickstart-tutorials-repository]]
=== Second method: get a Jenkins controller/agent combo ready to use

1. As in the <<using-the-wizard-with-docker-compose>> section, we'll need  to obtain the latest Jenkins instance, customized for this tutorial, by cloning the link:https://github.com/jenkins-docs/quickstart-tutorials.git[quickstart-tutorials repository].
2. After cloning, navigate to the `quickstart-tutorials` directory, and execute the command `docker compose --profile default up -d` to run the example.
This time, we're not using the `wizard` profile, but the `default` profile.
3. Once the containers are running successfully (you can verify this with `docker compose ps`), the controller can be accessed at http://localhost:8080.

[NOTE]
====
If you have already launched the Jenkins controller/agent combo  previously, you can stop it by running the command `docker compose --profile default down -v --remove-orphans`. +
This time, we're using the https://docs.docker.com/reference/cli/docker/compose/up/#options[`-d` or `--detach` option] in the `docker compose` command.
This option runs the containers in the background, so you can continue using the terminal.
Should you want to view the output of the containers, you can use the `docker compose logs -f &` command.
====

image::docker/jenkins-docker-instance-started.png[width=860]

Now, log in via your browser using the `admin` username and `admin` password on link:http://localhost:8080[localhost:8080].

[[accessing-the-jenkins-docker-containers]]
== Accessing the Docker containers

If you'd like to access the Docker container running your Jenkins controller through a terminal or command prompt using the link:https://docs.docker.com/reference/cli/docker/compose/exec/[`docker compose exec`] command, include the name of the service within the command to get something like:

[source,bash]
----
$ docker compose exec jenkins_controller bash
jenkins@be6994815148:/$ # We are now in the container running Jenkins
----

This will access the Docker container named "jenkins_controller."
As with standard access to a machine, you can exit the container by typing `exit` or pressing +++<kbd>Ctrl+D</kbd>+++.

To access the Docker container running your Jenkins agent, use the following command:

[source,bash]
----
$ docker compose exec default_agent bash
jenkins@be6994815148:/$ # We are now in the container running the Jenkins agent
----

To leave the container, type `exit` or press +++<kbd>Ctrl+D</kbd>+++.

[[accessing-the-jenkins-console-log-through-docker-logs]]
== Accessing the Docker logs

Should you need to access the services logs, you can do so by running the following command:
[source,bash]
----
docker compose logs -f
----

This command will display the logs of all services running in the dockerized Jenkins instance.
You will see the logs of the Jenkins controller, Jenkins agent, and the side-kick service.
If you would like to see the logs of a specific service, you can do so by specifying the service name as follows:
[source,bash]
----
docker compose logs -f <service-name>
----

With `<service-name>` being:

- `jenkins_controller` for the Jenkins controller
- `default_agent` for the Jenkins agent

== Accessing the Jenkins home directory

You can access the Jenkins home directory, to check the details of a Jenkins build in the `jobs` subdirectory, for example.
To access the Jenkins home directory, use the following command:
[source,bash]
----
docker compose exec jenkins_controller bash
----

You will then be in the Jenkins controller container.
To access the Jenkins home directory, use the following command:
[source,bash]
----
jenkins@be6994815148:/$ cd /var/jenkins_home/jobs
jenkins@be6994815148:/var/jenkins_home/jobs$ ls -la
----

This will list all the jobs in the Jenkins home directory.

Should you want to copy the jobs subdirectory from the Jenkins home directory to your local machine, you can use the following command:
[source,bash]
----
docker compose cp jenkins_controller:/var/jenkins_home/jobs <local-path>
----

With `<local-path>` being the path on your local machine where you want to copy the jobs subdirectory.

You could also do it the other way around, by copying the jobs subdirectory from your local machine to the Jenkins home directory in the container.
To do so, use the following command:

[source,bash]
----
docker compose cp <local-path> default_controller:/var/jenkins_home/jobs
----

This could be useful as the first step to try to migrate jobs from an old Jenkins controller to the last LTS version.

[[stopping-the-jenkins-docker-default-containers]]
== Stopping the Docker containers

To stop the Docker containers, run the following command in the second terminal:
[source,bash]
----
docker compose down --profile default -v --remove-orphans
----

This will stop the Docker containers, remove the volumes, and remove the containers.
If you want to keep the volumes, you can remove the `-v` option from the command.

